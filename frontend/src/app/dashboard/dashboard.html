<div class="dashboard-container">
	<div class="header">
		@if (offlineMode()) {
			<div class="offline-alert" role="status" aria-live="polite">Offline</div>
		}
		<button type="button" class="settings-button" (click)="openSettings()" aria-label="Open settings">
			<mat-icon>settings</mat-icon>
		</button>
	</div>
	<app-weather></app-weather>
	<br />
	@for (groupGroup of groupGroups(); track $index) {
		<app-card-group [group]="groupGroup"></app-card-group>
	}
	@if (dashboardDataQuery.isError()) {
		<p class="error" role="alert">
			{{ dashboardDataQuery.error().stack || dashboardDataQuery.error().message }}
		</p>
	}
</div>

@if (isSettingsOpen) {
	<app-modal (onClose)="closeSettings()" [width]="'80vw'" [height]="'80vh'">
		<app-settings></app-settings>
	</app-modal>
}
